<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Joe Lencioni]]></title>
  <link href="http://joelencioni.com/atom.xml" rel="self"/>
  <link href="http://joelencioni.com/"/>
  <updated>2013-06-10T14:12:04-07:00</updated>
  <id>http://joelencioni.com/</id>
  <author>
    <name><![CDATA[Joe Lencioni]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Showing Color Chips <em>from Sass Variables</em>]]></title>
    <link href="http://joelencioni.com/blog/2013/06/06/showing-color-chips-from-sass-variables/"/>
    <updated>2013-06-06T07:00:00-07:00</updated>
    <id>http://joelencioni.com/blog/2013/06/06/showing-color-chips-from-sass-variables</id>
    <content type="html"><![CDATA[<p>At <a href="http://www.causes.com">Causes</a> we like to make our code more maintainable by building reusable
components. Part of this strategy includes <a href="http://joelencioni.com/blog/2013/03/16/10-easy-ways-to-craft-more-readable-css/#two-or-more-use-a-for">assigning variable names to hex
colors using Sass</a>. This allows us to more easily reuse the same colors
everywhere, which improves consistency and makes it easier to re-color the
entire site when our design needs change.</p>

<p>To increase the visibility of these reusable components, we&#8217;ve been building
out a collection of things that designers and engineers can reference, drop in
to projects, and iterate upon. The code sits next to the rendered version,
allowing people to easily see the implementation required to produce the
result. We call this collection the component gallery. It helps us do more with
less code, be more consistent, and iterate on global changes more easily and
effectively.</p>

<p>When we started fleshing out the color variables we wanted to use throughout
the site, it seemed natural to show these colors in the component gallery as
Pantone color chips. That way, designers could reference the colors that we are
using, we&#8217;d have a single place to see that all of the colors look great next
to each other, and engineers could easily pluck variable names when
implementing designs to match the mocks.</p>

<p><img class="fancy" src="http://joelencioni.com/assets/2013-06-06-pantone-chips.png"></p>

<!-- more -->


<p>The quick solution would have had us defining these colors in two places: once
in Sass, where we actually need to use them, and again in Ruby, where we want
to render them on a page. However, we sensed that this would be a pain to
maintain and the two different definitions would quickly fall out of sync.</p>

<p>To resolve these issues, we decided to move our color variables into their own
Sass partial, and use Sass to parse it to display the colors and their
variables. Since we like to use <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html">functions like <code>darken()</code>, <code>lighten()</code>, and
<code>scale-color()</code></a>, we needed a solution that would actually execute the Sass
and use the result.</p>

<p>So we built a <a href="http://sass-lang.com/docs/yardoc/Sass/Tree/Visitors/Base.html">Sass Visitor</a> to evaluate variables and return pairs of names
and values:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">SassVariableEvaluator</span> <span class="o">&lt;</span> <span class="ss">Sass</span><span class="p">:</span><span class="ss">:Tree</span><span class="o">::</span><span class="ss">Visitors</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">visit_comment</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># prevents empty arrays from being in the returned array</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">visit_variable</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</span><span class='line'>    <span class="vi">@environment</span> <span class="o">||=</span> <span class="ss">Sass</span><span class="p">:</span><span class="ss">:Environment</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'>    <span class="vi">@environment</span><span class="o">.</span><span class="n">set_local_var</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="p">)</span>
</span><span class='line'>    <span class="o">[</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="o">.</span><span class="n">perform</span><span class="p">(</span><span class="vi">@environment</span><span class="p">)</span><span class="o">]</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then we have our <code>SassVariableEvaluator</code> visitor evaluate the variables in our
colors Sass partial:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">color_variables</span>
</span><span class='line'>  <span class="n">engine</span> <span class="o">=</span> <span class="ss">Sass</span><span class="p">:</span><span class="ss">:Engine</span><span class="o">.</span><span class="n">for_file</span><span class="p">(</span><span class="s1">&#39;path/to/_colors.css.scss&#39;</span><span class="p">,</span> <span class="ss">syntax</span><span class="p">:</span> <span class="ss">:scss</span><span class="p">)</span>
</span><span class='line'>  <span class="no">SassVariableEvaluator</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">engine</span><span class="o">.</span><span class="n">to_tree</span><span class="p">)</span><span class="o">.</span><span class="n">compact</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Looping over those evaluated variables in our view generates the desired
markup:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='haml'><span class='line'><span class="nc">.clearfix</span>
</span><span class='line'>  <span class="p">-</span> <span class="n">color_variables</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
</span><span class='line'>    <span class="nc">.pantone</span>
</span><span class='line'>      <span class="nc">.chip</span><span class="p">{</span> <span class="ss">style</span><span class="p">:</span> <span class="s2">&quot;background-color: </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span>;&quot; }
</span><span class='line'>      <span class="nt">%var</span> $<span class="si">#{</span><span class="nb">name</span><span class="si">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And style them nicely:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='sass'><span class='line'><span class="nc">.pantone</span> <span class="err">{</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> box-sizing</span><span class="p">(</span><span class="no">border</span><span class="o">-</span><span class="n">box</span><span class="p">)</span><span class="err">;</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> box-shadow</span><span class="p">(</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="nf">rgba</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mf">.1</span><span class="p">))</span><span class="err">;</span>
</span><span class='line'>  <span class="na">border</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#eee</span><span class="err">;</span>
</span><span class='line'>  <span class="na">float</span><span class="o">:</span> <span class="no">left</span><span class="err">;</span>
</span><span class='line'>  <span class="na">font-size</span><span class="o">:</span> <span class="mi">11</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>  <span class="na">margin</span><span class="o">:</span> <span class="mi">0</span> <span class="mi">2</span><span class="kt">%</span> <span class="mi">2</span><span class="kt">%</span> <span class="mi">0</span><span class="err">;</span>
</span><span class='line'>  <span class="na">width</span><span class="o">:</span> <span class="mi">23</span><span class="kt">%</span><span class="err">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">4n</span><span class="o">)</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">margin-right</span><span class="o">:</span> <span class="mi">0</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nc">.chip</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">background</span><span class="o">:</span> <span class="mh">#f00</span><span class="err">;</span>
</span><span class='line'>    <span class="na">height</span><span class="o">:</span> <span class="mi">0</span><span class="err">;</span>
</span><span class='line'>    <span class="na">padding-top</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="err">;</span> <span class="c1">// height based on width (square)</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">var</span> <span class="err">{</span>
</span><span class='line'>    <span class="na">display</span><span class="o">:</span> <span class="no">block</span><span class="err">;</span>
</span><span class='line'>    <span class="na">font-style</span><span class="o">:</span> <span class="no">normal</span><span class="err">;</span>
</span><span class='line'>    <span class="na">font-weight</span><span class="o">:</span> <span class="no">bold</span><span class="err">;</span>
</span><span class='line'>    <span class="na">height</span><span class="o">:</span> <span class="mi">40</span><span class="kt">px</span><span class="err">;</span>
</span><span class='line'>    <span class="na">padding</span><span class="o">:</span> <span class="mf">.75</span><span class="kt">em</span><span class="err">;</span>
</span><span class='line'>  <span class="err">}</span>
</span><span class='line'><span class="err">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Working with <em>Asynchronously Loaded JavaScript Objects</em>]]></title>
    <link href="http://joelencioni.com/blog/2013/05/28/working-with-asynchronously-loaded-javascript-objects/"/>
    <updated>2013-05-28T14:00:00-07:00</updated>
    <id>http://joelencioni.com/blog/2013/05/28/working-with-asynchronously-loaded-javascript-objects</id>
    <content type="html"><![CDATA[<p>Telling browsers to load large JavaScripts asynchronously can significantly
improve performance. This prevents the browser from blocking the rendering of
the page, allowing it to be viewed more quickly. However, if you are loading
dependent files asynchronously, such as a third-party service&#8217;s API, making the
scripts work together is not automatic.</p>

<p>At <a href="http://www.causes.com">Causes</a> we use Facebook&#8217;s large (nearly 60 <abbr
title="Kibibytes">KiB</abbr> gzipped) JavaScript API on our pages. Although
<a href="https://developers.facebook.com/docs/javascript/gettingstarted/#loading">they recommend loading it asynchronously</a>, we were already
putting our JavaScript at the bottom of the page and weren&#8217;t convinced that
async would give us much additional benefit. However, after some non-scientific
performance tests it appeared that switching to asynchronously loading the
Facebook API could reduce the time to <code>DOMContentLoaded</code> by nearly a full
second on our pages.</p>

<!-- more -->


<p>After the Facebook API has been loaded asynchronously, it executes
<code>window.fbAsyncInit</code>, which is where <a href="https://developers.facebook.com/docs/reference/javascript/#loading">they suggest</a> placing
code that depends on the <code>FB</code>.</p>

<p>The trouble is, we wanted our JavaScript that interacts with the Facebook API
to continue to work even though it is dispersed throughout our scripts, and it
may execute before the API was available.</p>

<p>The <a href="http://stackoverflow.com/questions/3548493/how-to-detect-when-facebooks-fb-init-is-complete">answers on StackOverflow</a> may work, but they feel inelegant. For
instance, <a href="http://stackoverflow.com/a/3549043/18986">one answer</a> addresses this problem by setting a flag to true
in the <code>fbAsyncInit</code> callback, and creates a <code>fbEnsureInit</code> method that uses a
recursive timeout to poll the flag.</p>

<p>We decided to take a different approach. Thankfully, the Facebook API sets up a
single object, <code>FB</code>, for developers to interact with.</p>

<p>So we developed a class, <code>MethodProxy</code>, to act as a proxy between the rest of
our code and the <code>FB</code> object. It accepts an object to forward calls onto, and
it masquerades as an Array by implementing a <code>push</code> method. The <code>push</code> method
accepts a single argument of a array whose first position is always a string of
the method name on the <code>FB</code> object to be executed, followed by as many
arguments to be given to that method.</p>

<figure class='code'><figcaption><span>MethodProxy.push()</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// payload : [&#39;methodName&#39;, arguments*]</span>
</span><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">push</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">forward</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">payload</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">methodName</span> <span class="o">=</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">object</span>     <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">method</span><span class="p">;</span>
</span><span class='line'>  <span class="k">while</span> <span class="p">(</span><span class="nx">methodName</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// dig into the object as many levels as needed (e.g. `FB.XFBML.parse`)</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">[</span><span class="nx">method</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">method</span> <span class="o">=</span> <span class="nx">methodName</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">object</span><span class="p">[</span><span class="nx">method</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">payload</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>This allows us to initialize a native Array when the page loads to collect
calls to Facebook&#8217;s API. Then, in the <code>fbAsyncInit</code> callback, we Indiana Jones
style swap out the native array with an instantiation of our <code>MethodProxy</code>
object, which then consumes the queued events by executing them on the <code>FB</code>
object. The end result is a consistent API for our code to use regardless of
the state of Facebook&#8217;s asynchronously loaded API.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">MyFB</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">MyFB</span> <span class="o">||</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'><span class="nx">MyFB</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;ui&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}]);</span>
</span><span class='line'>
</span><span class='line'><span class="nb">window</span><span class="p">.</span><span class="nx">fbAsyncInit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">FB</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">MyFB</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MethodProxy</span><span class="p">(</span><span class="nx">FB</span><span class="p">,</span> <span class="nx">MyFB</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">MyFB</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;FBML.parse&#39;</span><span class="p">,</span> <span class="p">...]);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>MethodProxy</code> is general enough to be used for other similar cases so we&#8217;ve
released it as <a href="https://github.com/causes/method-proxy-js">method-proxy-js, an open source project</a> under
the MIT license and packaged it up for <code>npm</code>. Installing is as easy as <code>npm
install method-proxy-js</code>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[10 Easy Ways to Craft <em>More Readable CSS</em>]]></title>
    <link href="http://joelencioni.com/blog/2013/03/16/10-easy-ways-to-craft-more-readable-css/"/>
    <updated>2013-03-16T15:45:00-07:00</updated>
    <id>http://joelencioni.com/blog/2013/03/16/10-easy-ways-to-craft-more-readable-css</id>
    <content type="html"><![CDATA[<blockquote><p>Always code as if the [person] who ends up maintaining your code will be a
violent psychopath who knows where you live. Code for readability.
—<cite><a href="https://groups.google.com/d/msg/comp.lang.c++/rYCO5yn4lXw/oITtSkZOtoUJ">John Woods</a></cite></p></blockquote>

<p>Diving into a large, old piece of CSS typically is neither easy nor
pleasurable. I find that <strong>the biggest challenges in working with old CSS often
lie in understanding the purpose and interactions of the styles</strong>.</p>

<p>When styling new elements, we have the entire context of the implementation
immediately available, and it is easy to write styles that make sense to us at
that very moment. However, in a few weeks or to a fresh pair of eyes, what made
a lot of sense at first might end up being a lot more cryptic. Without a clear
understanding of the purpose and interactions of the styles, modifying
stylesheets can be dangerous, tedious, and cumbersome. Therefore, it is
important to communicate enough context so that future developers will be able
to grok the code easily and make informed decisions.</p>

<p>At <a href="http://www.causes.com">Causes</a>, we have adopted the following practices which we believe have
improved the maintainability of our stylesheets, reduced bugs, and increased
developer velocity. When you have finished reading this, I hope that you will
have a few more tools to help move your codebase toward greater
maintainability.</p>

<!-- more -->


<p><a name="show-your-work"></a></p>

<h2>1. Show Your Work</h2>

<p>My math teachers would always require me to show my work. And, for good
reason—this exposed the steps that led up to my answer, allowing my teacher to
observe my thought processes and understand the point at which things went
horribly wrong (or magnificently right). In other words, showing my work
communicated a greater context with which to understand the reason something
was done.</p>

<p>Similarly, styles that show the work behind mysterious numbers communicate more
context, making them more readable and maintainable. We can easily apply this
when using a relative unit like <a href="http://en.wikipedia.org/wiki/Em_(typography)">ems</a>, where we determine the value by
taking the target size in pixels divided by the context size in pixels:</p>

<pre><code>ems = target px / context px
</code></pre>

<p>Imagine that we want to have an element with a font size of 10px, but defined
in ems, inside a container with a font size of 16px. The quick and easy way
would be to run through the equation above and simply drop in the result:</p>

<figure class='code'><figcaption><span>Quick, easy, and unreadable ems</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">font-size</span><span class="o">:</span> <span class="nc">.625em</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, if someone were to come along a few weeks later and see this strange
number, they might be confused about its exact meaning. Using a CSS
preprocessor such as <a href="http://sass-lang.com">Sass</a>, we can use a little math to show our work and
communicate more context:</p>

<figure class='code'><figcaption><span>Readable ems with Sass math</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">font-size</span><span class="o">:</span> <span class="p">(</span><span class="mi">10</span><span class="kt">px</span> <span class="o">/</span> <span class="mi">16</span><span class="kt">px</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="kt">em</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or, in plain CSS, a little comment can go a long way:</p>

<figure class='code'><figcaption><span>Readable ems in plain CSS</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">font-size</span><span class="o">:</span> <span class="nc">.625em</span><span class="o">;</span> <span class="c">/* 10px / 16px */</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, when someone sees this style, it is plain that it was expected to target a
10px font size in a 16px font size context, and it will be easier to make an
informed decision as to how to modify it.</p>

<p>Think of our styles as machines with many parts. If the machine isn’t working
as we’d like, it will be easier to repair it if we can actually see the moving
parts.</p>

<p><a name="two-or-more-use-a-for"></a></p>

<h2>2. Two or More, Use a For</h2>

<p>Spend some time establishing patterns and defining characteristics generally,
to promote reusability. This can be accomplished through setting up
presentational classes that can be mixed and matched to achieve a unified
visual appearance. It might be a good idea to set up a library of these
patterns that you can share with your team or start with a good framework like
<a href="http://typeplate.com">Typeplate</a> or <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> that kickstart this process for us.</p>

<p>With a CSS preprocessor like Sass, we have some very useful tools that allow us
to kick this up a notch, more easily take a <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> approach to CSS, and do
more with less code.</p>

<p><strong>Dispel magic numbers with variables.</strong> Similar to showing our work, instead
of leaving a hex color like <code>#00c5cd</code> for somebody to grok, naming it
<code>$turquoise</code> helps others immediately recognize what it is. In this case, the
reusability of variables is just the icing on the cake.</p>

<p><strong>Perform common calculations with functions.</strong> <a href="http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html">Sass has a bunch of built-in
functions</a> that can make our lives easier. To fill in the gaps, Sass allows
us to define our own functions. For example, at Causes we added a Sass function
that facilitates calculations of ems:</p>

<figure class='code'><figcaption><span>Defining functions in Sass</span><a href='http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#function_directives'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@function</span> <span class="nt">calc-em</span><span class="o">(</span><span class="err">$</span><span class="nt">target-px</span><span class="o">,</span> <span class="err">$</span><span class="nt">context-px</span><span class="o">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">@return</span> <span class="o">(</span><span class="err">$</span><span class="nt">target-px</span> <span class="o">/</span> <span class="err">$</span><span class="nt">context-px</span><span class="o">)</span> <span class="o">*</span> <span class="nt">1em</span><span class="o">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">h1</span> <span class="p">{</span>
</span><span class='line'>  <span class="na">font-size</span><span class="o">:</span> <span class="nf">calc-em</span><span class="p">(</span><span class="mi">36</span><span class="kt">px</span><span class="o">,</span> <span class="mi">16</span><span class="kt">px</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Use mixins and loops to abstract out common patterns.</strong> Packages like
<a href="http://compass-style.org">Compass</a> and <a href="http://bourbon.io">Bourbon</a> give us a lot of mixins right out of the box that
make cross-browser compatibility a breeze. So, instead of this mess:</p>

<figure class='code'><figcaption><span>Vendor-prefixed CSS transitions</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">-moz-transition</span><span class="o">:</span> <span class="nt">all</span> <span class="nt">0</span><span class="nc">.8s</span> <span class="nt">ease-in-out</span><span class="o">;</span>
</span><span class='line'><span class="nt">-ms-transition</span><span class="o">:</span> <span class="nt">all</span> <span class="nt">0</span><span class="nc">.8s</span> <span class="nt">ease-in-out</span><span class="o">;</span>
</span><span class='line'><span class="nt">-o-transition</span><span class="o">:</span> <span class="nt">all</span> <span class="nt">0</span><span class="nc">.8s</span> <span class="nt">ease-in-out</span><span class="o">;</span>
</span><span class='line'><span class="nt">-webkit-transition</span><span class="o">:</span> <span class="nt">all</span> <span class="nt">0</span><span class="nc">.8s</span> <span class="nt">ease-in-out</span><span class="o">;</span>
</span><span class='line'><span class="nt">transition</span><span class="o">:</span> <span class="nt">all</span> <span class="nt">0</span><span class="nc">.8s</span> <span class="nt">ease-in-out</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>With Compass:</p>

<figure class='code'><figcaption><span>Simple transitions in SCSS with Compass</span><a href='http://compass-style.org/reference/compass/css3/transition/'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@include</span><span class="nd"> transition</span><span class="p">(</span><span class="n">all</span> <span class="mi">0</span><span class="mf">.8</span><span class="kt">s</span> <span class="n">ease-in-out</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similarly, our first pass at a responsive design implementation added a
stylesheet on top of all of our styles to collect media queries.  However,
there was too much distance between the original style and the style being
modified in the media query, which resulted in the styles quickly becoming out
of sync as developers made modifications. So we sprinkled these styles
throughout our code, moving our media queries adjacent to the styles themselves
to increase locality, and used mixins to simplify the implementation, improve
readability, and reduce repetition:</p>

<figure class='code'><figcaption><span>Using Sass mixins for media queries</span><a href='http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixins'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@mixin</span><span class="nf"> respond-to</span><span class="p">(</span><span class="nv">$media</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">@if</span> <span class="nv">$media</span> <span class="o">==</span> <span class="n">tablet</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="nt">768px</span><span class="o">)</span> <span class="p">{</span> <span class="k">@content</span><span class="o">;</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">@else</span> <span class="nt">if</span> <span class="err">$</span><span class="nt">media</span> <span class="o">==</span> <span class="nt">mobile</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">@media</span> <span class="nt">only</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="nd">:</span> <span class="nt">360px</span><span class="o">)</span> <span class="p">{</span> <span class="k">@content</span><span class="o">;</span> <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">h1</span> <span class="p">{</span>
</span><span class='line'>  <span class="na">font-size</span><span class="o">:</span> <span class="nf">calc-em</span><span class="p">(</span><span class="mi">36</span><span class="kt">px</span><span class="o">,</span> <span class="mi">16</span><span class="kt">px</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> respond-to</span><span class="p">(</span><span class="n">tablet</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">font-size</span><span class="o">:</span> <span class="nf">calc-em</span><span class="p">(</span><span class="mi">24</span><span class="kt">px</span><span class="o">,</span> <span class="mi">16</span><span class="kt">px</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> respond-to</span><span class="p">(</span><span class="n">mobile</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">font-size</span><span class="o">:</span> <span class="nf">calc-em</span><span class="p">(</span><span class="mi">18</span><span class="kt">px</span><span class="o">,</span> <span class="mi">16</span><span class="kt">px</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>However, mixins and loops are a double-edged sword that can easily result in
generating too many styles. Always consider how your styles can be generalized
and reused. There may also be occasions where <code>@extend</code> makes a lot of sense,
but <a href="http://8gramgorilla.com/mastering-sass-extends-and-placeholders/">make sure to use it with placeholders</a>.</p>

<p><a name="use-percentages-for-most-widths"></a></p>

<h2>3. Use Percentages for (Most) Widths</h2>

<p>Have you ever beautifully styled an element, only to come back a few months
later to discover that the width needs to be adjusted due to an unrelated
change to a container?</p>

<p>I’ve discovered that if I start with percentages for horizontal dimensions
(widths, margins, and paddings) instead of pixels, <em>even when I’m not working
with a flexible design</em>, my styles are more resilient and require much less
babysitting. As a bonus, they tend to work better when dropped into new and
unexpected contexts and transition very well to flexible and responsive
layouts.</p>

<p>When using Sass, lean heavily on the percentage function to show your work (or
leave a comment):</p>

<figure class='code'><figcaption><span>Sass percentage function</span><a href='http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#percentage-instance_method'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">width</span><span class="o">:</span> <span class="nf">percentage</span><span class="p">(</span><span class="n">target</span> <span class="o">/</span> <span class="n">context</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Browsers use a default content-box sizing model to determine the sizes of
elements. This means that the <code>width</code> style will apply to the content box, and
then the padding, border, and margin get added on top of that. This is a
frequent gotcha when using percentages for widths, causing the element to take
up more space than you intended. Thankfully, we can tell the browser to use a
different box sizing model that calculates the size of an element including its
padding and border. Using the <code>box-sizing</code> property:</p>

<figure class='code'><figcaption><span>Vendor-prefixed CSS box-sizing</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">textarea</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#333</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="o">:</span> <span class="k">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="o">:</span> <span class="k">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">ms</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="o">:</span> <span class="k">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="o">:</span> <span class="k">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>  <span class="n">box</span><span class="o">-</span><span class="n">sizing</span><span class="o">:</span> <span class="k">border</span><span class="o">-</span><span class="n">box</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or, using Compass:</p>

<figure class='code'><figcaption><span>SCSS and Compass box-sizing</span><a href='http://compass-style.org/reference/compass/css3/box_sizing/'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nt">textarea</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">@include</span><span class="nd"> box-sizing</span><span class="p">(</span><span class="no">border</span><span class="o">-</span><span class="n">box</span><span class="p">);</span>
</span><span class='line'>  <span class="na">border</span><span class="o">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="no">solid</span> <span class="mh">#333</span><span class="p">;</span>
</span><span class='line'>  <span class="na">padding</span><span class="o">:</span> <span class="mi">1</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'>  <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are circumstances that require some fixed-width styles. For instance,
imagine a search box widget that consists of a text input and a button
side-by-side. If we want the entire widget to occupy the full width of its
container, but the button to be always as narrow as possible, we might want to
define the width of the button using a fixed unit and the input using a
percentage.</p>

<p><img class="fancy" src="http://joelencioni.com/assets/2013-03-16-flexible-search-widget.png"></p>

<figure class='code'><figcaption><span>HTML</span><a href='http://jsfiddle.net/jdRJB/'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">&quot;search-widget&quot;</span> <span class="na">method=</span><span class="s">&quot;get&quot;</span> <span class="na">action=</span><span class="s">&quot;action&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Search&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;fieldset&gt;</span>
</span><span class='line'>    <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;q&quot;</span> <span class="na">type=</span><span class="s">&quot;search&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/fieldset&gt;</span>
</span><span class='line'><span class="nt">&lt;/form&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>CSS</span><a href='http://jsfiddle.net/jdRJB/'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.search-widget</span> <span class="nt">fieldset</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">border</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">margin-right</span><span class="o">:</span> <span class="m">5em</span><span class="p">;</span>
</span><span class='line'>  <span class="k">padding</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.search-widget</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">submit</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">5em</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.search-widget</span> <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">search</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">width</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SCSS</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.search-widget</span> <span class="p">{</span>
</span><span class='line'>  <span class="nt">fieldset</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">border</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="na">margin-right</span><span class="o">:</span> <span class="mi">5</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'>    <span class="na">padding</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">submit</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">float</span><span class="o">:</span> <span class="no">right</span><span class="p">;</span>
</span><span class='line'>    <span class="na">width</span><span class="o">:</span> <span class="mi">5</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">input</span><span class="o">[</span><span class="nt">type</span><span class="o">=</span><span class="nt">search</span><span class="o">]</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">width</span><span class="o">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="express-intention"></a></p>

<h2>4. Express Intention</h2>

<p>At the core of the previous tips is this: write styles that most closely and
<em>clearly express the intention of the implementation</em>. This is my single,
overarching principle for writing readable CSS.</p>

<p>For example, let’s say we have a <code>heading</code> and a <code>blockquote</code> and we want the
<code>heading</code> to be larger and the <code>blockquote</code> to be smaller than the body copy.
Using pixels, we could write:</p>

<figure class='code'><figcaption><span>Font sizes using fixed units (px)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">h1</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">32px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">blockquote</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">14px</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>While this will work pretty well for our small, local implementation, the
styles themselves live in isolation and they don’t communicate to the reader
how they relate to one another. In this case, using a relative unit like ems
allows us to define how these styles relate to each other and communicate that
what we really want is for the heading to be twice as big as the body copy and
for blockquotes to be slightly smaller than the body copy:</p>

<figure class='code'><figcaption><span>Font sizes using relative units (em)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">h1</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">2em</span><span class="p">;</span> <span class="c">/* 32px / 16px */</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nt">blockquote</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">font-size</span><span class="o">:</span> <span class="m">.875em</span><span class="p">;</span> <span class="c">/* 14px / 16px */</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similarly, styles that use <code>inherit</code> and <code>rgba</code> appropriately are often more
intention-expressing and resilient.</p>

<figure class='code'><figcaption><span>Using inherit in SCSS</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.masthead</span> <span class="p">{</span>
</span><span class='line'>  <span class="na">background-color</span><span class="o">:</span> <span class="mh">#000</span><span class="p">;</span>
</span><span class='line'>  <span class="na">color</span><span class="o">:</span> <span class="mh">#fff</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">a</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">color</span><span class="o">:</span> <span class="no">inherit</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Class and ID names that are consistently formed and semantically meaningful go
along with the spirit of this point. Standardize on how to treat spaces. At
Causes, we use hyphens, but underscores and camelCasing are also reasonable
choices if you are consistent. Tend to pick names that describe the purpose or
meaning of the content, and not how it happens to appear. For instance,
<code>.local-navigation</code> is a better name than <code>.left-column</code>, especially when you
start using media queries to reflow major elements or decide that your local
navigation should be on the right side one day.</p>

<p><a name="be-less-specific"></a></p>

<h2>5. Be Less Specific</h2>

<p>Ideally, styles behave consistently across your site. Behavioral consistency
allows developers to quickly and easily understand the fundamentals of your
classes and apply them confidently in new situations.</p>

<p>One way to achieve this consistency is by defaulting to <a href="http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html">less-specific
selectors</a>—write shorter selector chains, or if using Sass use minimal
nesting. Less-specific selectors allow you to define general style patterns
that are easier to reuse, override where necessary, and may be more performant.
Qualifying an ID with any preceding selectors is a big <a href="http://en.wikipedia.org/wiki/Code_smell">code smell</a>.</p>

<p>This means that we should tend to prefer classes over IDs and avoid
<code>!important</code>. Strive for a flatter structure—the worst I’ve seen is a
stylesheet whose structure directly mirrored the markup it was being applied
to. Overly-qualified selectors are more susceptible to the whims of markup
changes; the structure of our stylesheets should be as markup-agnostic as
possible. Just keep things simple.</p>

<p>Additionally, stylesheets and markup are two sides of the same coin—many
styling problems are actually markup problems in disguise, and solving these
types of problems on the CSS side means you now have two problems. Sometimes a
little markup simplification can go a long way toward fixing a styling issue.</p>

<p><a name="love-the-cascade"></a></p>

<h2>6. Love the Cascade</h2>

<p>Reset stylesheets, such as <a href="http://meyerweb.com/eric/tools/css/reset/">Eric Meyer’s Reset CSS</a>, can be good because
they cancel out all default styles, putting all elements at a common
starting-point.  However, it is important to define good base styles for
typographical elements (e.g. <code>h1</code>, <code>h2</code>, <code>h3</code>, <code>ul</code>, <code>ol</code>) on top of the
defaults so your site can have some consistency and you avoid repetition. When
styling an element, ask yourself how many of those styles can be applied
globally, and when writing a style that overrides another, ask yourself if your
style override can be implemented more generally or moved up the chain.</p>

<p>At Causes, we were using a reset stylesheet but had failed to set up some
general, global styles. As a result, each time we wanted to use a new heading
on a page, we had to write some styles to make it look like the headings on
other types of pages. Not only did this slow development, but over time these
styles became inconsistent as some were modified but others were forgotten,
leaving us with a subtly fragmented and unmaintainable visual design. So, we
refactored these styles into sane defaults that are applied sitewide discovered
taht we could move faster and break fewer things.</p>

<p>However, be careful when applying styles to generic container elements (e.g.
<code>div</code>, <code>span</code>, <code>section</code>, <code>article</code>, <code>header</code>, <code>footer</code>, <code>nav</code>). For example,
since the <code>header</code> element can be easily used in many different contexts, just
like <code>div</code>s and <code>span</code>s, it might not be a good idea to give them all a certain
background color or font size. This messes up a sane style reset, makes it
difficult to use these general elements in new contexts, and ends up requiring
more complicated overrides that lead to styles with confusing purposes and
tangly interdependencies.</p>

<p><a name="leave-a-comment"></a></p>

<h2>7. Leave a Comment</h2>

<p>Occasionally, it is not possible to write intention-expressing styles or invent
class names that perfectly encapsulate an idea. These situations may easily
result in unconventional practices or styles whose purposes are not immediately
apparent. Although your code may seem incredibly obvious to you in the moment,
that doesn’t mean it will make sense to you or someone else in the future. When
I find myself in this situation, I leave a little comment to help explain my
intention.</p>

<p>For instance, although !important is best avoided because it violates the
<a href="http://en.wikipedia.org/wiki/Principle_of_least_astonishment">principle of least astonishment</a> and is difficult to override, sometimes
it is necessary such as when overriding an inline style that was added via
JavaScript that you don’t have control over.  Whenever you use <code>!important</code>,
leave a comment explaining why it is important.  This helps prevent a future,
well-intentioned developer from coming along and “fixing” your code. Bonus
points for leaving findable keywords in comments, which help people identify
and remove unusual styles as they are no longer needed.</p>

<p>I typically prefer same-line comments for this purpose because they more easily
stay attached to the style they reference. Sass provides one-line comments:</p>

<figure class='code'><figcaption><span>Using a comment in SCSS to explain reason for using !important</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">width</span><span class="o">:</span> <span class="no">auto</span> <span class="nv">!important</span><span class="p">;</span> <span class="c1">// override inline style from JS</span>
</span></code></pre></td></tr></table></div></figure>


<p>Standard CSS can still use block-style comments:</p>

<figure class='code'><figcaption><span>Using a comment in CSS to explain reason for using !important</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nt">width</span><span class="o">:</span> <span class="nt">auto</span> <span class="o">!</span><span class="nt">important</span><span class="o">;</span> <span class="c">/* override inline style from JS */</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="maintain-order"></a></p>

<h2>8. Maintain Order</h2>

<p>Similar to structuring our <abbr title="Document Object Model">DOM</abbr> with
an eye toward hierarchy, the order of our selectors should represent some order
of hierarchy or use. For instance, when using Sass at Causes, we follow this
order:</p>

<ol>
<li>Properties (styling the element)</li>
<li>Chained pseudo-selectors (styling states of the element)</li>
<li>Chained selectors (styling variants of the element)</li>
<li>Nested selectors (styling children of the element)</li>
</ol>


<p>This way, the styles that are most closely related to the element are
vertically closer to the selector itself.</p>

<figure class='code'><figcaption><span>Different types of selectors in a reasonable order</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="nc">.cool-link</span> <span class="p">{</span>
</span><span class='line'>  <span class="na">color</span><span class="o">:</span> <span class="mh">#009</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:focus</span><span class="o">,</span>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">color</span><span class="o">:</span> <span class="mh">#00f</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">&amp;</span><span class="nd">:active</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">color</span><span class="o">:</span> <span class="mh">#006</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">&amp;</span><span class="nc">.featured</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">font-size</span><span class="o">:</span> <span class="mi">2</span><span class="kt">em</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="nc">.metadata</span> <span class="p">{</span>
</span><span class='line'>    <span class="na">font-size</span><span class="o">:</span> <span class="no">smaller</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>We also alphabetize our properties. Although it may seem like lukewarm <abbr
title="Obsessive-compulsive disorder">OCD</abbr>, alphabetizing helps us
easily spot duplicates and assists developers in finding the properties they
want to modify, thanks to a standard ordering. As a side-benefit, according to
Google, <a href="https://developers.google.com/speed/docs/best-practices/payload#GzipCompression">properties that consistently appear in the same order will compress
better when gzipped</a>.  Many modern code editors provide a sorting
functionality, which makes alphabetizing styles a snap. (In Vim command mode I
type <code>vi{:sort</code>.)</p>

<p><a name="use-whitespace-effectively"></a></p>

<h2>9. Use Whitespace Effectively</h2>

<p>Whitespace allows us to more clearly see where one selector set ends and
another begins. Indentation helps communicate the hierarchy. Standardize on
these things across your codebase for maximum readability.</p>

<p>You should be minifying and gzipping your CSS already, so there is no penalty
for blank lines in your code.</p>

<p>At Causes, we indent with two spaces, leave a blank line between selector sets
of the same indentation level, and give each selector its own line. These
coding styles not only improve readability of the styles on the filesystem,
they also simplify diffs which eases code review and merge conflict resolution.</p>

<p><a name="enforce-coding-style"></a></p>

<h2>10. Enforce Coding Style</h2>

<p>Maintaining a readable codebase can be challenging if not everyone on your team
has fully bought into these ideas. To help these tactics permeate our team and
persist throughout our codebase, we lean heavily on <strong>automated linting</strong> and
<strong>code review</strong>.</p>

<p>A linter serves as a low-cost first pass to catch most of the basic issues. At
Causes, we are developing a <a href="https://github.com/causes/scss-lint">SCSS linter</a> (pull requests welcome) that runs
as one of our <a href="https://github.com/causes/overcommit">Git pre-commit hooks</a>. We have trained this linter to
enforce basic coding styles such as using one line per selector and
alphabetizing properties. Also, a tool like <a href="http://editorconfig.org">EditorConfig</a> might be worth
taking for a spin.</p>

<p>For problems that are more nuanced and difficult to detect through static
analysis, such as how well a set of styles expresses the intention of the
implementation, code review serves as a valuable second pass. When reviewing
stylesheet changes, I try to identify styles whose purpose is not immediately
apparent and explain some small steps that can be taken to make it better.</p>

<hr />

<p>I hope that this article has informed your underlying philosophy and will
assist you on your journey of writing beautiful code. There are plenty of other
relevant areas that I did not touch upon, such as the structure and
organization of your files, but I hope that what I did cover can be part of a
strong and sustainable foundation for your stylesheets.</p>

<p>CSS is like storytelling. There are often many ways to achieve a desired
outcome; some are more coherent than others.</p>
]]></content>
  </entry>
  
</feed>
